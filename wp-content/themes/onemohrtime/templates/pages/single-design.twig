{% extends 'base.twig' %}

{% block content %}
{% for post in posts %}

{# Banner Area #}
<header class="project__header">
	<figure class="project__banner fade-content">
		
		{% if banner %}
		<img src="{{ TimberImage(banner.image).src }}"
			 width="{{ banner.image.width }}" height="{{ banner.image.height }}"
			 alt="{{ banner.image.alt }}"
			 class="project__banner--image image--parallax"
			 data-speed="-0.25"
			 srcset="{{ TimberImage(banner.image).src('medium') }} 500w,
					 {{ TimberImage(banner.image).src('large') }} 1000w,
					 {{ TimberImage(banner.image).src('full') }} 1500w"
			 sizes="(max-width: {{ banner.image.width }}px) 100vw, {{ banner.image.width }}px" />
		<h2 class="project__subtitle">{{ banner.subtitle }}</h2>
		{% endif %}
		
		<h1 class="project__title">{{ post.title }}</h1>
		
		<a href="#contact" class="project__banner--contact btn"><span class="fa fa-long-arrow-left"></span> Contact</a>
		
	</figure>
	{# include "blocks/entry-meta.twig" #}
</header>

{# Project Details #}
{% if details %}
<aside class="project__specs fade-content">
	<div>
		<ul>
		{% for role in post.terms('role') %}
			<li><a href="#">{{ role }}</a></li>
		{% endfor %}
		</ul>
		<ul>
		{% for category in post.terms('category') %}
			<li><a href="#">{{ category }}</a></li>
		{% endfor %}
		</ul>
	</div>
</aside>
{% endif %}

{# Section Builder #}
{% if sections %}
<article class="project__story">
	
	{% for section in sections %}
	
	{% if section.acf_fc_layout == 'detail_text' %}
	
	{# Text #}
	<div class="project__section project__text wysiwyg fade-content">
		{{ section.text }}
	</div>
	
	{% elseif section.acf_fc_layout == 'detail_text_image' %}
	
	{# Text + Image #}
	<div class="project__section project__text-image
				{% if section.reverse %} project__text-image--reversed{% endif %}
				fade-content">
		<div class="content--half fade-content wysiwyg">
			{{ section.text }}
		</div>
		<figure class="image--half">
			<img src="{{ TimberImage(section.image).src('thumbnail') }}"
				 width="{{ section.image.width }}" height="{{ section.image.height }}"
				 alt="{{ section.image.alt }}"
				 class="image--half__image"
				 srcset="{{ TimberImage(section.image).src('medium') }} 500w,
						 {{ TimberImage(section.image).src('large') }} 1000w,
						 {{ TimberImage(section.image).src('full') }} 1500w"
				 sizes="(max-width: {{ section.image.width }}px) 100vw, {{ section.image.width }}px" />
		</figure>
	</div>
	
	{% elseif section.acf_fc_layout == 'detail_image' %}
	
	{# Image #}
	<div class="project__section project__image
				{% if section.display == 'standard' %} project__image--default
				{% elseif section.display == 'wide' %} project__image--wide
				{% elseif section.display == 'fixed' %} project__image--fixed{% endif %}">
		
		<img src="{{ TimberImage(section.image).src }}"
			 width="{{ section.image.width }}" height="{{ section.image.height }}"
			 alt="{{ section.image.alt }}"
			 class="project__image__image{% if section.display == 'fixed' %} image--parallax{% endif %}"
			 {% if section.display == 'fixed' %}data-speed="-0.25"{% endif %}
			 srcset="{{ TimberImage(section.image).src('medium') }} 500w,
					 {{ TimberImage(section.image).src('large') }} 1000w,
					 {{ TimberImage(section.image).src('full') }} 1500w"
			 sizes="(max-width: {{ section.image.width }}px) 100vw, {{ section.image.width }}px" />
	</div>
	
	{% elseif section.acf_fc_layout == 'detail_blockquote' %}
	
	{# Blockquote #}
	<div class="project__section project__blockquote wysiwyg fade-content">
		
		{% if section.image %}
		<blockquote class="blockquote blockquote__image">
			{{ section.text }}
			<footer class="blockquote__footer">
				<cite title="{{ section.cite }}">{{ section.cite }}</cite>
			</footer>
		</blockquote>
		<img src="{{ TimberImage(section.image).src }}"
			 width="{{ section.image.width }}" height="{{ section.image.height }}"
			 alt="{{ section.image.alt }}"
			 class="blockquote__image__image"
			 srcset="{{ TimberImage(section.image).src('medium') }} 500w,
					 {{ TimberImage(section.image).src('large') }} 1000w,
					 {{ TimberImage(section.image).src('full') }} 1500w"
			 sizes="(max-width: {{ section.image.width }}px) 100vw, {{ section.image.width }}px" />
		
		{% else %}
		<blockquote class="blockquote blockquote__default">
			{{ section.text }}
			<footer class="blockquote__footer">
				<cite title="{{ section.cite }}">{{ section.cite }}</cite>
			</footer>
		</blockquote>
		
		{% endif %}
	</div>
	
	{% elseif section.acf_fc_layout == 'detail_gallery' %}
	
	{# Gallery #}
	<div class="project__section project__gallery fade-content">
	{% for image in section.images %}
		
		<figure class="image">
			<img src="{{ TimberImage(image) }}"
				 width="{{ image.width }}" height="{{ image.height }}"
				 alt="{{ section.image.alt }}"
				 class="image__image"
				 srcset="{{ TimberImage(image).src('medium') }} 500w,
						 {{ TimberImage(image).src('large') }} 1000w,
						 {{ TimberImage(image).src('full') }} 1500w"
				 sizes="(max-width: {{ image.width }}px) 100vw, {{ image.width }}px"/>
			{% if image.caption %}
				<figcaption class="image__caption">{{ image.caption }}</figcaption>
			{% else %}
				<figcaption class="image__caption"><i class="fa fa-search-plus"></i></figcaption>
			{% endif %}
			
			<a href="{{ TimberImage(image).src('full') }}" class="image__link" data-fancybox{% if image.caption %} data-caption="{{ image.caption }}"{% endif %}>
				<span class="screen-reader-text">Click to zoom</span>
			</a>
		</figure>
		
	{% endfor %}
	</div>
	
	{% endif %}
	
	{% endfor %}
	
</article>
{% endif %}

{# Navigate between projects #}
<footer>
	{{ wp_link_pages }}
</footer>

{% endfor %}
{% endblock %}